<!DOCTYPE html>
<html>
<LINK REL="SHORTCUT ICON" HREF="img/favicon.ico">
<head>
    <title>Kontroll</title>
    <meta charset='utf-8'>
    <link rel="stylesheet" type="text/css" href="styles/webix.css">
    <link rel="stylesheet" type="text/css" href="styles/fordon.css">
    <script src="Scripts/jquery-1.10.2.js" charset="utf-8"></script>
    <script src="Scripts/webix.js" charset="utf-8"></script>
    <script src="Scripts/ArnApp.js" charset="utf-8"></script>
    <script src="Scripts/FordonLogic.js" charset="utf-8"></script>
    <style>
        .lbl_reg {
            color: blue;
            font-weight: bold;
        }
    </style>
</head>

<body onload="Main()">

    <script>
        window.activeUser = "";
webix.ui({
	id:"savetextwin",
	view:"window",
	responsive:true,
	position:"center",
	height:200,
	width:200,
	modal:true,
	head:false,
	body:"Saving..."
 }).hide();

 webix.ui({
	id:"loadtextwin",
	view:"window",
	responsive:true,
	position:"center",
	height:200,
	width:200,
	modal:true,
	head:false,
	body:"Loading..."
 }).hide();


webix.ui({
	id:"newKrav",
	view:"window",
	responsive:true,
	position:"center",
	height:300,
	width:500,
	modal:true,
	head:{
		view:"toolbar", cols:[
			{view:"label", label: "Lägg Till Krav" },
			{ view:"button", label: 'Stäng', width: 100, align: 'right', click:"$$('newKrav').hide();"}
		]
	},
	body:{
		view:"form",
		scroll:false,
		id:"NewKravForm",
		prenosniID:0,
		width:500,
		elements: [
			{ view:"text", id:"KravA", name:"KravA", value:'',labelWidth:150, label:"Krav" },
			{view:"select",id:"KravB", label:"Status",value:1,labelWidth:150,
				options:[
					{ "id":1, "value":"Enabled" },
					{ "id":0, "value":"Disabled" }
				]},
			{view:"select",id:"KravC", label:"Efterkontroll",value:1,labelWidth:150,
				options:[
                    { "value": "Ingen", "id":1 },
                    { "value": "Snarast", "id": 2 },
                    { "value": "Inom kort", "id": 3 }
				]},
			{view:"select",id:"KravD", label:"Exkluderade Bilar",value:1,labelWidth:150,
				options:[
					{ "value":"Inga", "id":1 },
                    { "value": "Storbilar", "id":2 },
                    { "value": "Executive", "id":3 },
                    { "value": "Bilar utan centralen transponder", "id": 4 },
                    { "value": "Bilar utan OTT-kategori", "id": 5 }
				]},
			{ margin:5, cols:[
				{ view:"button", id:"saveKravbtn", value:"Save" , click:function(){
					var form = this.getParentView().getParentView();
					if (form.validate())
						SaveKrav();
					else
						webix.message({ type:"error", text:"Krav saknas!" });
					}
				},
				{ view:"button", value:"Cancel",click:"$$('newKrav').hide();" }
			]}
		],
		rules:{
				"KravA":CheckKrav
			}
	}
 }).hide();


 webix.ui({
	id:"newUser",
	view:"window",
	responsive:true,
	position:"center",
	height:300,
	width:500,
	modal:true,
	head:{
		view:"toolbar", cols:[
			{view:"label", label: "Lägg Till Användare" },
			{ view:"button", label: 'Stäng', width: 100, align: 'right', click:"$$('newUser').hide();"}
		]
	},
	body:{
		view:"form",
		scroll:false,
		id:"NewUserForm",
		prenosniID:0,
		width:500,
		elements: [
			{ view:"text", id:"UserA", name:"UserA", value:'',labelWidth:150, label:"Email" },
			{view:"select",id:"UserB", label:"Status",value:1,labelWidth:150,
				options:[
					{ "id":"Standard", "value":"Standard" },
					{ "id":"Special", "value":"Special" },
					{ "id":"Administrator", "value":"Administrator" }
				]},
			{ margin:5, cols:[
				{ view:"button", id:"saveUserbtn", value:"Save" , click:function(){
					var form = this.getParentView().getParentView();
					if (form.validate())
						SaveUser();
					else
						webix.message({ type:"error", text:"Användare email saknas!" });
					}
				},
				{ view:"button", value:"Cancel",click:"$$('newUser').hide();" }
			]}
		],
		rules:{
				"UserA":webix.rules.isEmail
			}
	}
 }).hide();

 webix.ui({
	id:"newFordonControll",
	view:"window",
	responsive:true,
	position:"center",
	height:300,
	width:500,
	modal:true,
	head:{
		view:"toolbar", cols:[
			{view:"label", label: "Lägg Till Kontroll" },
			{ view:"button", label: 'Stäng', width: 100, align: 'right', click:"$$('newFordonControll').hide();"}
		]
	},
	body:{
		view:"form",
		scroll:false,
		id:"NewFordonControllForm",
		prenosniID:0,
		width:500,
        elements: [
            {
                view: "select", id: "KontrolGrupp", label: "Typ", value: 1, labelWidth: 150,
                options: [
                    { "id": "1", "value": "Planerad fordonskontroll" },
                    { "id": "2", "value": "Flygande fordonskontroll" }
                ]
            },
            {
                view: "datepicker", id: "KontrollFran", align: "right", label: 'Från:', labelWidth: 150, format: "%Y-%m-%d", on: {
                    "onChange": function (newv) {
                        $$("KontrollTill").getPopup().getBody().define("minDate", newv);
                        $$("KontrollTill").refresh();
                    }
                }
            },
            {
                view: "datepicker", id: "KontrollTill", align: "right", label: 'Till:', labelWidth: 150, format: "%Y-%m-%d", on: {
                    "onChange": function (newv) {
                        $$("KontrollFran").getPopup().getBody().define("maxDate", newv);
                        $$("KontrollFran").refresh();
                    }
                }
            },
			{ margin:5, cols:[
                {
                    view: "button", id: "saveFordonControllbtn", value: "Save", click: function () {
                        if ($$("KontrollFran").getValue() && $$("KontrollTill").getValue()) {
                            SaveFordonControll();
                        }
                        else {
                            webix.message({ type: "error", text: "Please enter From To Dates!" });
                        }
					}
				},
				{ view:"button", value:"Cancel",click:"$$('newFordonControll').hide();" }
			]}
		]
	}
 }).hide();

 webix.ui({
	id:"changePassWindow",
	view:"window",
	responsive:true,
	position:"center",
	height:300,
	width:500,
	modal:true,
	head:{
		view:"toolbar", cols:[
			{view:"label", label: "Change Password" },
			{ view:"button", label: 'Stäng', width: 100, align: 'right', click:"$$('changePassWindow').hide();"}
		]
	},
	body:{
		view:"form",
		id:"ChangePassForm",
		scroll:false,
		width:500,
		elements: [
			{ view:"text", id:"chCurrent", value:'',labelWidth:150, label:"Current Password" },
			{ view:"text", id:"chNewA", value:'', labelWidth:150,label:"New Password"},
			{ view:"text", id:"chNewB", value:'', labelWidth:150,label:"Repeat Password"},
			{ margin:5, cols:[
				{ view:"button", value:"Update" , type:"form" },
				{ view:"button", value:"Cancel" }
			]}
		]
	}
 }).hide();

 webix.ui({
	id:"forgetPassWindow",
	view:"window",
	responsive:true,
	position:"center",
	height:300,
	width:550,
	modal:true,
	head:{
		view:"toolbar", cols:[
			{view:"label", label: "Forget Password" },
			{ view:"button", label: 'Stäng', width: 100, align: 'right', click:"$$('forgetPassWindow').hide();"}
		]
	},
	body:{
		view:"form",
		id:"ForgetPassForm",
		scroll:false,
		width:550,
		elements: [
			{ view:"text", id:"frUN", value:'',labelWidth:150, label:"Your Email" },
			{ margin:5, cols:[
				{ view:"button", value:"Send" , id:"btn_SendMainForgetPass", type:"form", click:"SendMainForgetPassword()"},
				{ view:"button", value:"Cancel" }
			]},
			{view:"label",label:"",css:"lbl_reg", id:"lbl_msg_reg"}
		]
	}
 }).hide();

    </script>
</body>
</html>